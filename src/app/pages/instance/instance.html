<mat-card *ngIf="data.hasOwnProperty('user') && this.authService.user.isAdmin!=undefined">
  <mat-card-header>
    <div mat-card-avatar><mat-slide-toggle [color]="primary" matTooltip='On/Off' matTooltipPosition='above' style="margin-top: 10px;"></mat-slide-toggle></div>
    <mat-card-title>{{ data.name }}</mat-card-title>
    <mat-card-subtitle>{{ data.user.department }}-{{ data.user.group }} {{ data.user.first_name }} {{ data.user.last_name }}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content style="display:flex; justify-content: center;">
    <div class="flex-container">
      <mat-form-field class="field">
        <input matInput placeholder="Owner" name="owner" value="{{data.owner}}" [disabled]="!this.authService.user.isAdmin" (blur)="changeField($event.target.name,$event.target.value)" (keyup.enter)="$event.target.blur()">
      </mat-form-field>
      <mat-form-field class="field">
        <input matInput placeholder="Egroup" name="egroup" value="{{data.egroup}}" [disabled]="!this.authService.user.isAdmin" (blur)="changeField($event.target.name,$event.target.value)" (keyup.enter)="$event.target.blur()">
      </mat-form-field>
      <mat-form-field class="field">
        <input matInput placeholder="Project" name="project" value="{{data.project}}" (blur)="changeField($event.target.name,$event.target.value)" (keyup.enter)="$event.target.blur()">
      </mat-form-field>
      <mat-form-field class="field">
        <input matInput placeholder="Description" name="description" value="{{data.description}}" (blur)="changeField($event.target.name,$event.target.value)" (keyup.enter)="$event.target.blur()">
      </mat-form-field>
      <mat-form-field class="field">
        <input matInput placeholder="Creation date" name="creation_date" value="{{data.creation_date}}" disabled (blur)="changeField($event.target.name,$event.target.value)" (keyup.enter)="$event.target.blur()">
      </mat-form-field>
      <mat-form-field class="field">
        <input matInput placeholder="Expiry date" name="expiry_date" value="{{data.expiry_date}}" [disabled]="!this.authService.user.isAdmin" (blur)="changeField($event.target.name,$event.target.value)" (keyup.enter)="$event.target.blur()">
      </mat-form-field>
      <mat-form-field class="field">
        <input matInput placeholder="Type" name="type" value="{{data.type}}" disabled (blur)="changeField($event.target.name,$event.target.value)" (keyup.enter)="$event.target.blur()">
      </mat-form-field>
      <mat-form-field class="field">
        <input matInput placeholder="Version" name="version" value="{{data.version}}" [disabled]="!this.authService.user.isAdmin" (blur)="changeField($event.target.name,$event.target.value)" (keyup.enter)="$event.target.blur()">
      </mat-form-field>
      <mat-form-field class="field">
        <mat-select matInput placeholder="Category" name="category" value="{{data.category}}" [disabled]="!this.authService.user.isAdmin" (selectionChange)="changeField('category',$event.value)">
          <mat-option value="REF">REF</mat-option>
          <mat-option value="TEST">TEST</mat-option>
          <mat-option value="PROD">PROD</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-checkbox name="notifications" value="{{data.attributes.notifications}}" [disabled]="!this.authService.user.isAdmin" (change)="changeAttributeField('notifications',$event.checked)">Notifications</mat-checkbox>
    </div>
  </mat-card-content>
</mat-card>

<mat-card style="margin-top: 15px;">
  <ngb-tabset>
    <ngb-tab title="Logs">
      <ng-template ngbTabContent>
        <instance-logs [data]="data"></instance-logs>
      </ng-template>
    </ngb-tab>
    <ngb-tab title="Jobs" class="tabber">
      <ng-template ngbTabContent>
        <instance-jobs [data]="data"></instance-jobs>
      </ng-template>
    </ngb-tab>
    <ngb-tab title="Snapshots">
      <ng-template ngbTabContent>
        <instance-snapshots [data]="data"></instance-snapshots>
      </ng-template>
    </ngb-tab>
    <ngb-tab title="File Editor">
      <ng-template ngbTabContent>
        <file-editor></file-editor>
      </ng-template>
    </ngb-tab>
    <ngb-tab title="Metadata Editor">
      <ng-template ngbTabContent>
        <metadata-editor [data]="data"></metadata-editor>
      </ng-template>
    </ngb-tab>
  </ngb-tabset>
</mat-card>
